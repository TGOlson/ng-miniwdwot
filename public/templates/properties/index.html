<div class="row">
  
  <div class='col-md-12'>
    <h1 class='page-header'>Properties</h1>
  </div>
      
  <div class="col-md-12">
    <iframe width='100%' height='300px' frameBorder='0' src='http://a.tiles.mapbox.com/v3/loveland.h2nk5m03/mm/zoompan,zoomwheel,geocoder,share.html' ng-hide='hideMap' class='map-border'></iframe>

    <div class='hide-map'>
      <p><a href ng-click="hideMap = !hideMap">{{ hideMap ? "Show" : "Hide"}} map</a></p>
    </div>

  </div>


  <div class='col-md-12'>
    <div class='col-md-3'>
      <form  role="form">
        <div class='form-group '>
          <input type="text" class="form-control" placeholder="Search" ng-model='search.text'>
        </div>
        <button class='btn btn-default' ng-show='search.text.length' ng-click='search.text = null'>y</button>

        <div class='form-group'>
          <div class="checkbox checkbox-inline">
            <label><input type="checkbox" ng-model='search.featured'> Featured</label>
          </div>
        </div>
  
        <p class='text-muted property-count'>Showing {{ filteredProperties.length || 0 }} of {{ properties.length || 0 }} properties.</p>
      </form>
    </div>
  </div>


  <div class='col-md-12' ng-hide="!filteredProperties.length">
    <div class='display-icons'>
      <p class='pull-right'>
        <i class="fa fa-th-large fa-border" ng-click='slim = false' ng-class='{selected: !slim}'></i>
        <i class="fa fa-bars fa-border" ng-click='slim = true' ng-class='{selected: slim}'></i>    
      </p>
    </div>
  </div>
  
</div>


  <div class='row'>

  <!-- <div class='col-sm-12'> -->
    
    
  <div ng-if='properties' ng-hide='emptySet' ng-repeat='property in filteredProperties = ( properties | filter:search.text | featured:search.featured )'>


  <div ng-if='!slim'> 

      <div class="col-md-6" ng-include="'/templates/properties/property_card.html'"></div>
    <!-- <div ng-if='!slim' class="col-md-6"> -->
  </div> <!-- col-md-6 -->

  <!-- </div> -->

  <!-- <div class='row' ng-if='slim'> -->
    
    <div ng-if='slim' class="col-xs-12">
      <div class="col-xs-3">
        <img ng-src="{{ property.streetview_url }}" class='property-image img-thumbnail'>
      </div>
      <div class="col-xs-9">
        <h1><a href='#/{{ organization.id }}/properties/{{ property.fid }}'>{{ property.address }}<a/></h1>
        <h3>{{ property.city }}, {{ property.state }} {{ property.zip }}</h3>
      </div>
    </div>
  <!-- </div> -->


  <!-- </div> -->

  <h4 ng-hide='filteredProperties.length'>No properties match those search criteria.</h4>
  </div>

</div> <!-- row -->


  <div ng-hide='emptySet || properties'>
    <p><img src="/img/loader.gif"> Loading available properties.</p>
  </div>

  <div ng-show='emptySet'>
    <p>Looks like there are no properties here. Sorry.</p>
    <p>If you are the admin of this organization try signing in and changing your settings.</p>
  </div>


  <div ng-include="'/templates/properties/inquiry_modal.html'"></div>
