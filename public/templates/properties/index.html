<div ng-if='properties' ng-hide='emptySet'>

  <div class="row">
    <div class="col-sm-12">
      <iframe width='100%' height='300px' frameBorder='0' src='http://a.tiles.mapbox.com/v3/loveland.h2nk5m03/mm/zoompan,zoomwheel,geocoder,share.html'></iframe>
    </div>
  </div>

  <div class="row page-header">
    <div class='col-sm-6'>
      <h2>Properties</h2>
    </div>
    <div class='col-sm-6'>
      <p class='text-muted property-count'>Showing {{ filteredProperties.length }} of {{ properties.length }} properties.</p>
    </div>
  </div>


  <div class='row' ng-repeat='property in filteredProperties = ( properties | filter:search.text )'>

    <div class="col-sm-6">
      <img ng-src="{{ property.streetview_url }}" class='property-image'>
    </div>

    <div class="col-sm-6">

      <h1><a href='#/{{ organization.id }}/properties/{{ property.id }}'>{{ property.address }}<a/></h1>
      <h3>{{ property.city }}, {{ property.state }} {{ property.zip }}</h3>
      
      <h4>Property Tags</h4>
      <div class='property-tags'>
        <span ng-repeat='tag in property.tags' class='property-tags'><span class="label label-warning">{{ tag }}</span></span>
      </div>

      <div class='property-inquiry'>
        <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#propertyInquiryModal">
          Ask About This Property
        </button>
      </div>

    </div>

    <h4 ng-hide='filteredProperties.length'>No properties match those search criteria.</h4>

  </div>

</div>

<div ng-hide='emptySet || properties'>
  <p><img src="/img/loader.gif"> Loading available properties.</p>
</div>

<div ng-show='emptySet'>
  <p>Looks like there are no properties here. Sorry.</p>
  <p>If you are the admin of this organization try signing in and changing your settings.</p>
</div>


<div ng-include="'/templates/properties/inquiry_modal.html'"></div>
